(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{CJNn:function(e,n,t){"use strict";t.r(n);var l=t("cDcd"),a=t.n(l),o=t("dEAq"),r=t("H1Ra");t("JjdP");n["default"]=e=>(a.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("p",null,"\u4e00\u5929, \u5728\u67d0\u4e2a\u516b\u5366\u7fa4\u91cc, E \u541b\u7a81\u7136\u629b\u51fa\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898:"),a.a.createElement("img",{style:{maxHeight:"30vh",margin:"0 auto",display:"block"},src:"https://user-images.githubusercontent.com/6339390/131245739-d8b84a49-e7ea-4159-8883-6d297d8bc150.png"}),a.a.createElement("p",null,"\u6253\u5f00",a.a.createElement(o["Link"],{to:"https://www.typescriptlang.org/play/#code/C4TwDgpgBAogNhAthAdsACgJwPZgM5QC8UA3gFBRQBGArsMNigFykWVQAmAlngIZUIOLKtmwJeKANxsAvtMpcUYOi3LtOPfoOGjxUtpQBuvODQgs8wTIoDm8qHLZdEN1Qah5MAYwtXb9x0cyUEhYBGQ0LFw8AFleMCJWSgAiWnpGADpuPgEIDmSdMQgJe2TFZWAszVz8wr1S8roM41MIAo8-FDs2MpcMzy92y2su6SCgA"},"\u6e90\u9898\u76ee"),"\u8fd9\u4e2a\u94fe\u63a5, \u770b\u4e00\u4e0b\u9700\u6c42:"),a.a.createElement(r["a"],{code:"// \u7b14\u8005: \u4e3a\u4e86\u4fbf\u4e8e\u8bb2\u89e3, \u4e0b\u6587\u5c06\u8be5\u7c7b\u578b\u79f0\u4e3a \"original type\"/\"\u6e90\u7c7b\u578b\"\ntype ElementProps = {\n  button: {\n    disabled: boolean;\n  };\n  input: {\n    disabled: boolean;\n    value: string;\n  };\n  img: {\n    src: string;\n  };\n};\n\n// \u7b14\u8005: \u4e3a\u4e86\u4fbf\u4e8e\u8bb2\u89e3, \u4e0b\u6587\u5c06\u8be5\u7c7b\u578b\u79f0\u4e3a \"target type\"/\"\u76ee\u6807\u7c7b\u578b\"\ntype ElementPropsMap = {\n  'button.disabled': boolean;\n  'input.disabled': boolean;\n  'input.value': string;\n  'img.src': string;\n};",lang:"ts"}),a.a.createElement("p",null,"\u7fa4\u53cb\u4eec\u7eb7\u7eb7\u5efa\u8a00\u732e\u7b56, \u6700\u540e\u5927\u81f4\u7ed9\u51fa\u4e86\u4ee5\u4e0b\u51e0\u7c7b\u7b54\u6848. \u7b14\u8005\u8bb0\u5f55\u5230\u672c\u6587, \u5e76\u7ed9\u51fa\u89e3\u6790."),a.a.createElement("p",null,"\u4e3a\u4f18\u5316\u9605\u8bfb\u4f53\u9a8c, \u6211\u4eec\u7ea6\u5b9a:"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u7b14\u8005\u4f1a\u5728\u7684 ts \u4ee3\u7801\u4e2d\u6dfb\u52a0\u6ce8\u91ca\u7528\u4e8e\u89e3\u91ca, \u8fd9\u7c7b\u6ce8\u91ca\u4f1a\u4ee5 ",a.a.createElement("code",null,"// \u7b14\u8005:")," \u5f00\u5934"),a.a.createElement("li",null,a.a.createElement("code",null,"NESTED-PROPERTY-NAME")," \u6307\u4ee3 ",a.a.createElement("code",null,"a.b.c.d")," \u8fd9\u7c7b\u7528\u4e8e\u591a\u7ea7\u8bbf\u95ee\u7684\u7684\u5c5e\u6027 key")),a.a.createElement("h2",{id:"\u7b2c\u4e00\u7c7b"},a.a.createElement(o["AnchorLink"],{to:"#\u7b2c\u4e00\u7c7b","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u7b2c\u4e00\u7c7b"),a.a.createElement("p",null,"Skyline \u541b\u8f6c\u8f7d\u4e86",a.a.createElement(o["Link"],{to:"https://www.typescriptlang.org/play?#code/C4TwDgpgBAogNhAthAdsACgJwPZgM5QC8UA3gFBRQBGArsMNigFykWVQAmAlngIZUIOLKtmwJeKANxsAvtMpcUYOi3LtOPfoOGjxUtpQBuvODQgs8wTIoDm89h17BeeCMFUH2AM1EsUNRCoITHt1Kl5MCytbUKgZWXsuRBsPdTxMAGMo6xQ7BLI5MjJQSFgEZDQsXDwAWV4wIigAMTgneCRUDBx8AB52iq7qgD4ikugWpyqwAGkIEDwegBUhxsWoCAAPYFQOAgAlCAzsTA4eyxybABooGhQAaxRsAHcUFYB+VkoAbXQoRSg7nNsF4oIsALosX6bbYoXZQc62KAfAAGABISOgZAA6dETQYzOYLRY-MFDGTIqB+CCGYLSGRfQEgYGgsGUqAAcnZ0mK4Ggi2siAAMi5gAARbDAJYrYhraE7AhokiKLzBKAAVWxFI+arZKGptNGvKgAHE3FNFryltdptKoNN1lt5VBFcrVZicUqUCrMFA9uSkVAoY7YQRGcy1h9TfiLZAliTrnsVlSaT6WItuWNmq1gP1OlMiba1FAfn8UFnJt1ZvMpVAXKCBcLLOLJeghhCTWbujGIFbA0M6UA"},"\u4e00\u4f4d\u670b\u53cb\u7684\u89e3\u6cd5")),a.a.createElement("img",{style:{margin:"0 auto",display:"block"},src:"https://lh3.googleusercontent.com/proxy/01LgsQaHbVGhpuVw8SgrjDWMoM6YCe5dnLB2gNJQIlhRVIGN8-QdO5GWmKmK1NzMf5M4hM8QvB8cCH9zQXIKQdcEKnOjaViOcy__q67G1NUKAsw6708UFw"}),a.a.createElement(r["a"],{code:"type ElementProps = {\n  button: {\n    disabled: boolean;\n  };\n  input: {\n    disabled: boolean;\n    value: string;\n    dataset: {\n      foo: number;\n      bar: string;\n    };\n  };\n  img: {\n    src: string;\n  };\n};\n\ntype ElementPropsMap = FlatElementProps<ElementProps>;\n\n// \u7b14\u8005: \u4ee5\u4e0b\u5f00\u59cb\u5b9e\u73b0 FlatElementProps\n\n// \u7b14\u8005: FlatPropKeys \u7528\u4e8e\u5c06 nested object \u7684\u6240\u6709 property-chain \u63d0\u53d6\u51fa\u6765, \u7ec4\u6210\u4e00\u4e2a\n// Literal String Union.\ntype FlatPropKeys<T> = T extends Record<string, unknown>\n  ? {\n      [P in keyof T]: P extends string ? `${P}.${FlatPropKeys<T[P]>}` : never;\n    }[keyof T]\n  : '';\n\ntype TrimLastDot<T> = T extends `${infer U}.` ? U : never;\n\ntype GetPropType<T, K> = K extends `${infer P}.${infer R}`\n  ? P extends keyof T\n    ? GetPropType<T[P], R>\n    : never\n  : T;\n\ntype FlatElementProps<T> = {\n  [P in FlatPropKeys<T> as TrimLastDot<P>]: GetPropType<T, P>;\n};",lang:"ts"}),a.a.createElement("p",null,"\u8fd9\u7c7b\u65b9\u6848\u7684\u601d\u8def\u662f,"),a.a.createElement("p",null,"\\1. \u5148\u63d0\u53d6\u51fa\u6240\u6709\u53ef\u80fd\u7684\u7531 nested key \u7ec4\u6210\u7684\u6df1\u5ea6\u8bbf\u95ee NESTED-PROPERTY-NAME, \u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u5b9e\u73b0\u4e3a ",a.a.createElement("code",null,"FlatPropKeys<object>")),a.a.createElement("p",null,"\u5982\u6e90\u7c7b\u578b ",a.a.createElement("code",null,"ElementProps")," \u6709 ",a.a.createElement("code",null,"input.dataset.foo")," \u8fd9\u6837\u7684\u8bbf\u95ee\u8def\u5f84, \u901a\u8fc7 ",a.a.createElement("code",null,"FlatPropKeys<ElementProps>"),", \u5219\u8fd4\u56de\u7684 string union type \u4e2d\u5219\u4f1a\u5305\u542b ",a.a.createElement("code",null,"'input.dataset.foo.'")),a.a.createElement("p",null,a.a.createElement("img",{src:"https://user-images.githubusercontent.com/6339390/131246172-e76dea6c-e007-4c1c-bc18-a5827a394d34.png",alt:"image"})),a.a.createElement("p",null,a.a.createElement("strong",null,"\u6ce8\u610f")," \u76f4\u63a5\u4f7f\u7528 ",a.a.createElement("code",null,"FlatPropKeys<object>")," \u5f97\u5230\u7684 NESTED-PROPERTY-NAME \u6709\u4e2a\u7f3a\u70b9, \u5373\u672b\u5c3e\u4f1a\u591a\u4e00\u4e2a ",a.a.createElement("code",null,"."),", \u56e0\u6b64\u5728\u4e0b\u4e00\u6b65, \u6211\u4eec\u9700\u8981\u4f7f\u7528 ",a.a.createElement("code",null,"as TrimLastDot<P>")," \u88c1\u526a\u4e00\u4e0b"),a.a.createElement("p",null,"\\2. \u8ba1\u7b97\u51fa\u76ee\u6807\u7c7b\u578b:"),a.a.createElement("p",null,"2.1 \u5c06 ",a.a.createElement("code",null,"FlatPropKeys<object> as TrimLastDot<...>")," \u4f5c\u4e3a\u65b0 interface \u7684 NESTED-PROPERTY-NAME"),a.a.createElement("p",null,a.a.createElement("img",{src:"https://user-images.githubusercontent.com/6339390/131246250-1d312256-4b1c-4ac3-9e1b-b9b0b1d19a84.png",alt:"image"})),a.a.createElement("p",null,"2.2 \u5b9e\u73b0\u4e00\u4e2a\u7c7b\u578b, \u5b83\u63a5\u53d7 ",a.a.createElement("code",null,"TrimLastDot<FlatPropKeys<object>>")," \u4e3a\u53c2\u6570, \u53bb\u6e90\u7c7b\u578b\u4e2d\u63d0\u53d6 nested value. \u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u5b9e\u73b0\u4e3a ",a.a.createElement("code",null,"GetPropType<object, NESTED-PROPERTY-NAME>")),a.a.createElement("p",null,"\u8fd9\u91cc ",a.a.createElement("code",null,"FlatPropKeys")," / ",a.a.createElement("code",null,"TrimLastDot")," \u7684\u5b9e\u73b0\u90fd\u5bb9\u6613\u7406\u89e3, \u7b14\u8005\u91cd\u70b9\u8bf4\u4e00\u4e0b ",a.a.createElement("code",null,"GetPropType")," \u7684\u5b9e\u73b0:"),a.a.createElement(r["a"],{code:"type GetPropType<T, K> = K extends `${infer P}.${infer R}`\n  ? P extends keyof T\n    ? GetPropType<T[P], R>\n    : never\n  : T;",lang:"ts"}),a.a.createElement("p",null,"\u8be5\u5b9e\u73b0\u89e3\u91ca\u4e3a, \u5bf9\u4e8e\u4e00\u4e2a\u6cdb\u578b\u53c2\u6570 T(\u53ef\u80fd\u4e3a nested object \u6216\u522b\u7684 value),"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5982\u679c K \u4e0d\u662f NESTED-PROPERTY-NAME, \u90a3\u4e48, \u76f4\u63a5\u8fd4\u56de T \u672c\u8eab"),a.a.createElement("li",null,"\u5982\u679c K \u662f NESTED-PROPERTY-NAME, \u90a3\u4e48, \u4ece\u5176\u7b2c\u4e00\u4e2a ",a.a.createElement("code",null,".")," \u5206\u5272\u4e3a\u4e24\u90e8\u5206 ",a.a.createElement("code",null,"P"),", ",a.a.createElement("code",null,"R"),"; \u8fd4\u56de ",a.a.createElement("code",null,"GetPropType<T[P], R>"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"T[P]")," \u4f1a\u4ece ",a.a.createElement("code",null,"T")," \u4e2d\u63d0\u53d6\u51fa\u5176\u4ee5 ",a.a.createElement("code",null,"P")," \u547d\u540d\u7684\u53c2\u6570(\u5f88\u663e\u7136 ",a.a.createElement("code",null,"P")," \u4e0d\u662f NESTED-PROPERTY-NAME)"),a.a.createElement("li",null,"\u5982\u679c ",a.a.createElement("code",null,"T[P]")," \u6b64\u65f6\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a nested object, \u90a3\u4e48 ",a.a.createElement("code",null,"GetPropType<T[P], R>")," \u4f1a\u5bfc\u81f4\u8fdb\u4e00\u6b65\u63d0\u53d6 ",a.a.createElement("code",null,"T")," \u4e2d\u518d\u4e0b\u4e00\u5c42\u7ea7\u7684\u503c")))),a.a.createElement("p",null,"\u5f88\u663e\u7136\u8fd9\u662f\u4e00\u4e2a\u6709\u4e2d\u6b62\u6761\u4ef6\u7684\u9012\u5f52, \u53ef\u4ee5\u60f3\u8c61, \u5bf9\u4e8e"),a.a.createElement(r["a"],{code:"type TRet = GetPropType<\n  {\n    foo1: {\n      foo2: { foo3: string };\n    };\n  },\n  'foo1.foo2.foo3'\n>;",lang:"ts"}),a.a.createElement("p",null,"\u663e\u7136 ",a.a.createElement("code",null,"TRet")," \u5c31\u662f:"),a.a.createElement(r["a"],{code:"{\n  foo3: string;\n}",lang:"ts"}),a.a.createElement("h2",{id:"\u7b2c\u4e8c\u7c7b"},a.a.createElement(o["AnchorLink"],{to:"#\u7b2c\u4e8c\u7c7b","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u7b2c\u4e8c\u7c7b"),a.a.createElement("h2",{id:"\u7b2c\u4e09\u7c7b"},a.a.createElement(o["AnchorLink"],{to:"#\u7b2c\u4e09\u7c7b","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u7b2c\u4e09\u7c7b"))))}}]);